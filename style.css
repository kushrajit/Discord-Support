@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Dancing+Script:wght@400;600;700&display=swap');

:root{
  --bg:#dfe3ff;
  --card:#ffffff;
  --text:#1c1d2a;
  --muted:#6b6f86;
  --primary:#5968ff;
  --danger:#ff3b6b;
  --shadow: 0 18px 50px rgba(0,0,0,.10);
  --radius: 18px;
}

*{ box-sizing:border-box; }
body{
  margin:0;
  font-family: Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 22px;
}
.brand{ display:flex; align-items:center; gap:10px; }
.logo{
  width:34px;height:34px;border-radius:12px;
  background: rgba(89,104,255,.18);
  display:grid;place-items:center;
  font-weight:800;
}
.brand-text{ font-weight:800; letter-spacing:.2px; }
.top-links{ display:flex; align-items:center; gap:18px; }
.link{ color: var(--text); text-decoration:none; font-weight:600; opacity:.85; }
.link:hover{ opacity:1; text-decoration:underline; }

.wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 24px;
}

.card{
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 22px;
  margin: 16px 0;
}

.page{ display:none; }
.page.active{ display:block; }

.hero{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:18px;
  margin-bottom: 16px;
}
.shield, .bot{
  font-size: 44px;
  width: 70px; height: 70px;
  display:grid; place-items:center;
  border-radius: 22px;
  background: rgba(89,104,255,.12);
}

h1{
  margin:0;
  letter-spacing: 2px;
  font-size: 56px;
  line-height:1;
  color: var(--primary);
}
h2{ margin: 0 0 8px 0; font-size: 26px; }
.muted{ margin: 0 0 12px 0; color: var(--muted); }

.form{ margin-top: 10px; }
.row{ display:flex; flex-direction:column; gap:8px; margin: 14px 0; }
label{ font-weight:700; }
input, textarea, select{
  width:100%;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,.10);
  outline: none;
  font-size: 15px;
}
input:focus, textarea:focus, select:focus{ border-color: rgba(89,104,255,.7); }

.tiny{ font-size: 13px; color: var(--muted); }

.actions{ display:flex; justify-content:flex-end; margin-top: 16px; }
.actions.split{ justify-content:space-between; align-items:center; }
.btn{
  border:0;
  padding: 12px 16px;
  border-radius: 14px;
  background: var(--primary);
  color: white;
  font-weight: 800;
  cursor:pointer;
  box-shadow: 0 12px 24px rgba(89,104,255,.22);
}
.btn:disabled{ opacity:.45; cursor:not-allowed; }
.btn.ghost{
  background: rgba(0,0,0,.10);
  color: var(--text);
  box-shadow:none;
}
.btn.danger{
  background: var(--danger);
  box-shadow: 0 12px 24px rgba(255,59,107,.20);
}

.phrase{
  font-weight: 900;
  font-size: 22px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(89,104,255,.10);
  display:inline-block;
  margin: 6px 0 10px;
}

.chaos-area{
  margin-top: 14px;
  border-radius: 16px;
  background: rgba(0,0,0,.06);
  height: 180px;
  overflow:hidden;
  position:relative;
}
.emoji-spam{
  position:absolute; inset: 0;
  padding: 10px;
  font-size: 28px;
  line-height: 1.25;
  user-select:none;
}

canvas{
  width:100%;
  border-radius: 16px;
  background: rgba(89,104,255,.08);
  border: 1px solid rgba(0,0,0,.08);
}

.choices{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-top: 12px;
}
.choice{
  border: 1px solid rgba(0,0,0,.10);
  background: rgba(89,104,255,.08);
  border-radius: 16px;
  padding: 14px;
  font-weight: 900;
  cursor:pointer;
}
.choice:hover{ transform: translateY(-1px); }

.result{
  margin-top: 14px;
  padding: 14px;
  border-radius: 16px;
  background: rgba(0,0,0,.05);
  min-height: 54px;
  font-weight: 700;
}

.corner-note{
  position: fixed;
  right: 10px;
  bottom: 10px;
  font-size: 11px;
  color: rgba(0,0,0,.45);
  background: rgba(255,255,255,.55);
  border: 1px solid rgba(0,0,0,.08);
  padding: 6px 8px;
  border-radius: 10px;
  user-select:none;
}

/* Catch-the-face game */
.catch-wrap { margin-top: 10px; }
.catch-area{
  margin-top: 10px;
  height: 320px;
  border-radius: 16px;
  background: rgba(89,104,255,.08);
  border: 1px solid rgba(0,0,0,.08);
  position: relative;
  overflow: hidden;
}
.catch-target{
  position:absolute;
  width: 96px;
  height: 96px;
  border-radius: 18px;
  object-fit: cover;
  cursor: pointer;
  user-select:none;
  -webkit-user-drag: none;
  box-shadow: 0 14px 30px rgba(0,0,0,.18);
  border: 2px solid rgba(255,255,255,.75);
}

/* Selection overlay */
.overlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(2px);
}
.overlay.hidden{ display:none; }
.overlay-text{
  position: relative;
  z-index: 2;
  font-weight: 1000;
  text-align:center;
  color: white;
  text-shadow: 0 10px 30px rgba(0,0,0,.45);
  padding: 16px 18px;
  border-radius: 22px;
}
.overlay-text.big-ok{
  font-size: 92px;
  background: rgba(255,255,255,.12);
  border: 1px solid rgba(255,255,255,.20);
}
.overlay-text.party{
  font-size: 44px;
  background: rgba(255,255,255,.12);
  border: 1px solid rgba(255,255,255,.20);
}
.overlay-fx{
  position:absolute;
  inset: 0;
  overflow:hidden;
  z-index: 1;
}
.fx-emoji{
  position:absolute;
  font-size: 34px;
  animation: fall 1.7s linear infinite;
  opacity: .95;
}
@keyframes fall{
  from{ transform: translateY(-60px) rotate(0deg); }
  to{ transform: translateY(calc(100vh + 60px)) rotate(360deg); }
}

/* PARTY PAGE (clean + no overlap) */
.party-page{
  position: relative;
  overflow: hidden;
  padding-bottom: 28px;
}

.party-header{
  position: relative;
  z-index: 3;
  text-align:center;
  padding: 8px 10px 14px;
}
.party-title{
  font-size: 56px;
  font-weight: 1000;
  letter-spacing: .5px;
  line-height: 1.05;
  color: #4c5bff;
  text-shadow: 0 16px 40px rgba(0,0,0,.10);
}
.party-subtitle{
  margin-top: 6px;
  color: rgba(0,0,0,.60);
  font-weight: 800;
}

/* GIF stage sits under title */
.party-gif-area{
  position: relative;
  z-index: 2;
  height: 420px;
  border-radius: 18px;
  background: rgba(89,104,255,.06);
  border: 1px solid rgba(0,0,0,.08);
  overflow:hidden;
}

.gif-stage{
  position:absolute;
  inset: 0;
  pointer-events:none;
}

/* floating gifs */
.party-gif{
  position:absolute;
  width: 170px;
  height: 170px;
  border-radius: 18px;
  object-fit: cover;
  opacity: .95;
  box-shadow: 0 16px 40px rgba(0,0,0,.18);
  animation: floaty 2.8s ease-in-out infinite;
}
@keyframes floaty{
  0%,100%{ transform: translateY(0px) rotate(-2deg); }
  50%{ transform: translateY(-14px) rotate(2deg); }
}

/* emojis float across full page, but behind everything */
.party-emoji-layer{
  position:absolute;
  inset: 0;
  z-index: 1;
  pointer-events:none;
  overflow:hidden;
}
.party-emoji{
  position:absolute;
  font-size: 30px;
  opacity: .92;
  animation: drift 3.2s linear infinite;
}
@keyframes drift{
  from{ transform: translateY(-40px) rotate(0deg); }
  to{ transform: translateY(calc(100% + 40px)) rotate(360deg); }
}

.party-scroll-hint{
  position: relative;
  z-index: 3;
  text-align:center;
  margin: 14px 0 10px;
  font-weight: 900;
  color: rgba(0,0,0,.55);
}

/* slideshow area is on its own clean panel so nothing overlaps */
.party-photo-panel{
  position: relative;
  z-index: 5;
  margin-top: 10px;
  padding: 14px;
  border-radius: 18px;
  background: rgba(255,255,255,.88);
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 18px 50px rgba(0,0,0,.10);
}

.party-photo-title{
  font-weight: 1000;
  font-size: 20px;
  margin-bottom: 10px;
}

/* slideshow: NOT cropped */
.party-slideshow{
  height: 78vh;
  min-height: 420px;
  margin-top: 0;
  background: rgba(0,0,0,.06);
}
.party-slideshow img{
  width:100%;
  height:100%;
  object-fit: contain; /* <-- this fixes cropping */
}


/* Page 2 plot twist */
.twist { text-align:center; }
.twist-badge{
  display:inline-block;
  padding:8px 12px;
  border-radius:999px;
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
  margin-bottom:14px;
  font-weight:700;
  letter-spacing:0.4px;
}
.muted.big{ font-size: 1.05rem; line-height: 1.5; }
.accent{ color: var(--blurple); font-weight:800; }
.twist-gifs{
  margin: 18px auto 10px;
  display:flex;
  gap:14px;
  justify-content:center;
  flex-wrap:wrap;
}
.twist-gif{
  width: 160px;
  height: 160px;
  object-fit: cover;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}


/* Final page media playlist */
.media-shell{
  position: relative;
  margin-top: 10px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.18);
  overflow: hidden;
}
.media-author{
  position:absolute;
  top: 10px;
  right: 10px;
  left: auto;
  padding: 8px 10px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(89,104,255,0.95), rgba(255,59,107,0.85));
  border: 1px solid rgba(255,255,255,0.22);
  font-size: 0.9rem;
  z-index: 3;
}
.media-video{
  width:100%;
  max-height: 520px;
  background: #000;
  display:block;
}
.media-text{
  padding: 26px 22px 22px;
  min-height: 260px;
  max-height: 520px;
  overflow: auto;
  display:flex;
  align-items:center;
  justify-content:center;
}
.media-text-body{
  font-family: "Dancing Script", cursive;
  font-size: 1.8rem;
  line-height: 1.45;
  text-align: center;
  padding: 6px 10px;
}
.hidden{ display:none !important; }

/* inline form errors */
.form-error{
  margin-top: 8px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,59,107,10);
  border: 1px solid rgba(255,59,107,22);
  color: #b1002a;
  font-weight: 900;
  display:none;
}
.form-error.show{ display:block; }

@keyframes shake{
  0%,100%{ transform: translateX(0); }
  20%{ transform: translateX(-6px); }
  40%{ transform: translateX(6px); }
  60%{ transform: translateX(-4px); }
  80%{ transform: translateX(4px); }
}
.shake{ animation: shake .35s ease; }


.tiny.note{opacity:.75;margin-top:6px;}

/* audio message player */
.media-audio{
  width: 100%;
  display: block;
  padding: 18px 18px 22px;
  background: rgba(0,0,0,0.18);
}

.twist-embed{
  width: 220px;
  height: 220px;
  border-radius: 18px;
  border: 0;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  overflow:hidden;
}

.party-gif-frame{
  position:absolute;
  border:0;
  border-radius: 18px;
  overflow:hidden;
  opacity: .95;
  box-shadow: 0 16px 40px rgba(0,0,0,.18);
  animation: floaty 2.8s ease-in-out infinite;
}

.disco-poppers{ position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index:1; }
.disco-pop{ position:absolute; width:10px; height:16px; border-radius:3px; background:rgba(255,255,255,.92); opacity:.85; animation: discoFall 2.2s linear infinite; }
@keyframes discoFall{ from{ transform: translateY(-60px) rotate(0deg);} to{ transform: translateY(calc(100vh + 120px)) rotate(720deg);} }

.disco-page{ animation: discoHue 3.2s linear infinite; }
@keyframes discoHue{ from{ filter:hue-rotate(0deg);} to{ filter:hue-rotate(360deg);} }

/* Disco lights overlay */
.disco-page{
  position: relative;
  overflow: hidden;
}
.disco-page::before{
  content:"";
  position:absolute;
  inset:-50%;
  background: conic-gradient(from 0deg, rgba(255,255,255,.20), rgba(255,255,255,0) 25%, rgba(255,255,255,.20) 50%, rgba(255,255,255,0) 75%, rgba(255,255,255,.20));
  animation: discoSpin 6s linear infinite;
  pointer-events:none;
  mix-blend-mode: overlay;
  opacity: .75;
}
@keyframes discoSpin{ to{ transform: rotate(360deg); } }

.party-confetti{ position:absolute; inset:0; z-index:1; pointer-events:none; overflow:hidden; }
.party-confetti .confetti{
  position:absolute;
  width:10px; height:16px; border-radius:3px;
  background: rgba(255,255,255,.85);
  opacity:.85;
  animation: confFall 3.8s linear infinite;
}
@keyframes confFall{ from{ transform: translateY(-60px) rotate(0deg);} to{ transform: translateY(calc(100vh + 120px)) rotate(720deg);} }

/* Secret prompt big */
.secret-prompt{
  font-weight: 1000;
  font-size: 44px;
  letter-spacing: 1px;
  padding: 12px 14px;
  border-radius: 16px;
  background: rgba(89,104,255,.10);
  display:inline-block;
  margin: 6px 0 10px;
}

/* Force disco page to look like disco (overrides .card) */
.card.disco-page{
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, #ff4ecd, #4d7cff) !important;
  color: #fff;
  animation: discoHue 3.2s linear infinite;
}
@keyframes discoHue{
  from{ filter: hue-rotate(0deg); }
  to{ filter: hue-rotate(360deg); }
}
.card.disco-page::before{
  content:"";
  position:absolute;
  inset:-50%;
  background: conic-gradient(from 0deg, rgba(255,255,255,.22), rgba(255,255,255,0) 25%, rgba(255,255,255,.22) 50%, rgba(255,255,255,0) 75%, rgba(255,255,255,.22));
  animation: discoSpin 6s linear infinite;
  pointer-events:none;
  mix-blend-mode: overlay;
  opacity: .75;
}
@keyframes discoSpin{ to{ transform: rotate(360deg); } }
.card.disco-page .muted{ color: rgba(255,255,255,.9) !important; }

.disco-poppers{ position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index: 2; }
.disco-pop{ position:absolute; width:10px; height:16px; border-radius:3px; background: rgba(255,255,255,.92); opacity:.85; animation: discoFall 2.2s linear infinite; }
@keyframes discoFall{ from{ transform: translateY(-60px) rotate(0deg);} to{ transform: translateY(calc(100vh + 120px)) rotate(720deg);} }

.party-confetti{ position:absolute; inset:0; z-index: 2; pointer-events:none; overflow:hidden; }
.party-confetti .confetti{
  position:absolute;
  width:10px; height:16px; border-radius:3px;
  background: rgba(255,255,255,.85);
  opacity:.85;
  animation: confFall 3.8s linear infinite;
}
@keyframes confFall{ from{ transform: translateY(-60px) rotate(0deg);} to{ transform: translateY(calc(100vh + 120px)) rotate(720deg);} }


/* Ensure party poppers cover the whole party page */
.party-page{ position: relative; overflow: hidden; }
.party-confetti{
  position: absolute;
  inset: 0;
  z-index: 4; /* above gif stage */
  pointer-events: none;
  overflow: hidden;
}
.party-confetti .confetti{
  position:absolute;
  width:10px; height:16px; border-radius:3px;
  background: rgba(255,255,255,.85);
  opacity:.85;
  animation: confFall 3.8s linear infinite;
}
@keyframes confFall{
  from{ transform: translateY(-60px) rotate(0deg); }
  to{ transform: translateY(calc(100vh + 120px)) rotate(720deg); }
}

/* Make disco lights definitely visible on page2 */
.card.disco-page::before{ z-index: 0; }
.card.disco-page .twist, .card.disco-page .twist-gifs, .card.disco-page .actions{ position: relative; z-index: 3; }
.disco-poppers{ z-index: 2; }

.media-text-frame{
  width: 100%;
  min-height: 340px;
  max-height: 520px;
  border: 0;
  border-radius: 18px;
  background: rgba(255,255,255,.92);
}

/* Keep poppers in background (not over slideshow panel) */
.party-confetti{ z-index: 1 !important; }
.party-lights{ z-index: 1 !important; }
.party-photo-panel, .party-video-panel, .media-shell, .video-controls{ position: relative; z-index: 5; }

.disco-poppers{ z-index: 1 !important; }
.disco-page .twist, .disco-page .twist-gifs, .disco-page .actions{ position: relative; z-index: 3; }

.music-banner{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(0,0,0,.72);
  color: #fff;
  font-weight: 800;
  z-index: 9999;
  border: 1px solid rgba(255,255,255,.18);
}
.music-banner.hidden{ display:none; }

/* green play button */
.btn.success{
  background: #22c55e;
  color: #fff;
  box-shadow: 0 12px 24px rgba(34,197,94,.25);
}
.btn.success:hover{ filter: brightness(0.95); }

.song-row{
  display:flex;
  gap: 12px;
  align-items:center;
  margin-bottom: 12px;
}
